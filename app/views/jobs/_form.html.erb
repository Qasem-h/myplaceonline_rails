<%= myp_text_field(f, :job_title, "myplaceonline.jobs.job_title", obj.job_title, autofocus) %>
<%= myp_text_field(f, :employee_identifier, "myplaceonline.jobs.employee_identifier", obj.employee_identifier) %>
<%= myp_text_field(f, :department_name, "myplaceonline.jobs.department_name", obj.department_name) %>
<%= myp_text_field(f, :division_name, "myplaceonline.jobs.division_name", obj.division_name) %>
<%= myp_date_field(f, :started, "myplaceonline.jobs.started", obj.started) %>
<%= myp_date_field(f, :ended, "myplaceonline.jobs.ended", obj.ended) %>
<%= myp_integer_field(f, :days_vacation, "myplaceonline.jobs.days_vacation", obj.days_vacation) %>
<%= myp_integer_field(f, :days_holiday, "myplaceonline.jobs.days_holiday", obj.days_holiday) %>
<%= myp_text_area_markdown(f, :notes, "myplaceonline.jobs.notes", obj.notes) %>
<%=
  render partial: 'myplaceonline/select_or_create', locals: {
    f: f,
    name: :company,
    existingobj: obj.company,
    heading: t("myplaceonline.jobs.company"),
    objform: "companies/form",
    existingobjurl: "company_path",
    searchurl: "/companies.json?perpage=0",
    edit: edit,
    autofocus: false
  }
%>
<%=
  render partial: 'myplaceonline/select_or_create', locals: {
    f: f,
    name: :manager_contact,
    existingobj: obj.manager_contact,
    heading: t("myplaceonline.jobs.manager_contact"),
    objform: "contacts/form",
    existingobjurl: "contact_path",
    searchurl: "/contacts.json?perpage=0",
    edit: edit,
    autofocus: false
  }
%>
<%=
  render layout: 'myplaceonline/childproperties', locals: {
    f: f,
    heading: t("myplaceonline.jobs.job_salaries"),
    childpropertiesname: :job_salaries,
    childproperties: obj.job_salaries,
    deletebutton: t("myplaceonline.jobs.delete_salary"),
    addbutton: t("myplaceonline.jobs.add_salary"),
    expanded: !edit || obj.job_salaries.length > 0,
    formjson: [
      {
        type: 'date',
        name: 'started',
        placeholder: t("myplaceonline.job_salaries.started")
      },
      {
        type: 'date',
        name: 'ended',
        placeholder: t("myplaceonline.job_salaries.ended")
      },
      {
        type: 'text',
        name: 'salary',
        placeholder: t("myplaceonline.job_salaries.salary")
      },
      {
        type: 'select',
        name: 'salary_period',
        options: Myp::PERIODS.map{|x,y| [I18n.t(x),y]}.as_json,
        placeholder: t("myplaceonline.job_salaries.salary_period")
      },
      {
        type: 'textarea',
        name: 'notes',
        placeholder: t("myplaceonline.job_salaries.notes")
      }
    ]
  } do |child_fields, childproperty|
%>
  <%= myp_date_field(child_fields, :started, "myplaceonline.job_salaries.started", childproperty.started) %>
  <%= myp_date_field(child_fields, :ended, "myplaceonline.job_salaries.ended", childproperty.ended) %>
  <%= myp_decimal_field(child_fields, :salary, "myplaceonline.job_salaries.salary", childproperty.salary) %>
  <%= myp_select(child_fields, :salary_period, "myplaceonline.job_salaries.salary_period", Myp.translate_options(Myp::PERIODS), childproperty.salary_period) %>
  <%= myp_text_area_markdown(child_fields, :notes, "myplaceonline.job_salaries.notes", childproperty.notes) %>
<% end %>
