<%
  decrypted_password = obj.password
%>

<%= data_row(heading: t("myplaceonline.passwords.name"), content: obj.name) %>
<%=
  data_row(
    heading: t("myplaceonline.passwords.password"),
    content: decrypted_password,
    background_highlight: true
  )
%>
<%= data_row(heading: t("myplaceonline.passwords.user"), content: obj.user) %>
<%= data_row(heading: t("myplaceonline.passwords.email"), content: obj.email) %>
<%= attribute_table_row(t("myplaceonline.passwords.url"), url_or_blank(obj.get_url, nil, decrypted_password, nil, true, true), obj.get_url, "focusable") %>
<%= data_row(heading: t("myplaceonline.passwords.account_number"), content: obj.account_number) %>
<%= data_row(heading: t("myplaceonline.passwords.notes"), content: obj.notes, markdown: true) %>

<% obj.password_secrets.each do |secret| %>
  <%= data_row(heading: secret.question, content: secret.answer) %>
<% end %>
  
<%= data_row(heading: t("myplaceonline.passwords.isencrypted"), content: obj.password_encrypted?, boolean: true) %>
  
<script type="text/javascript">
  myplaceonline.onPageLoad(function() {
    if (window.ffclipboard) {
      var link = $('.focusable a');
      link.keypress(function(e) {
        if (e.which == 13) {
          window.ffclipboard.setText(<%= raw(decrypted_password.to_json) %>);
        }
      });
      link.focus();
    }
  });
</script>
